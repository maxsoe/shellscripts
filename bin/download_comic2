#!/bin/bash

#Download comics from http://readcomics.website

#see if there is a way to introduce parameters
# comic="batgirl-2016"

#change issue numbers if need be
first_issue=41;
last_issue=42;

first_image=1;
last_image=50;

#### Main

echo -n "Enter name of comic eg 'batgirl-2016' > "
read comic
echo -n "number of first issue > "
read first_issue
echo -n "number of final issue > "
read last_issue
echo -n "number of iamges > "
read last_image

current_issue=$first_issue
current_image=$first_image
#echo "current_issue is $current_issue"
mkdir $comic
cd $comic

for ((current_issue=$first_issue; current_issue<=$last_issue; current_issue++))
do
  mkdir $current_issue
  cd $current_issue
  for ((current_image=$first_image; current_image<=$last_image; current_image++))
  do
    printf -v formatted_current_image "%02d" $current_image
    #echo "current_image is $current_image"
    echo "current issue is $current_issue"
    echo "formatted_current_image is $formatted_current_image"
    if
      curl --output /dev/null --silent --head --fail https://readcomicsonline.ru/uploads/manga/$comic/chapters/$current_issue/$formatted_current_image.jpg ;
    then
      echo "URL exists: $formatted_current_image.jpg";
      curl -O https://readcomicsonline.ru/uploads/manga/$comic/chapters/$current_issue/$formatted_current_image.jpg
    else
      echo "URL does not exist: $formatted_current_image.jpg";
    fi

  done

  cd ..
done
echo "ALL DONE!!"
